# hotkey_helpers - 快捷键工具函数

## 组件概述

**文件路径:** `src/helpers/ipc/shortcut/hotkey_helpers.ts`  
**角色:** 工具函数库 - 快捷键格式处理  
**层级:** 基础设施层

`hotkey_helpers.ts`提供了一组纯函数，用于处理、格式化和转换键盘快捷键，确保在不同平台和上下文中的一致性。这个模块抽象了快捷键处理的复杂性，为主进程和渲染进程中的快捷键功能提供了共享的实用工具。

## 核心功能

- 快捷键格式的标准化和转换
- 平台特定快捷键的映射和处理
- 用户友好格式与系统格式之间的转换
- 快捷键格式验证和错误检查

## 实现细节

### 格式转换函数

- `formatAccelerator`: 将快捷键格式化为标准格式
- `acceleratorToHumanReadable`: 将系统格式转换为用户友好的显示格式
- `humanReadableToAccelerator`: 将用户友好格式转换为系统格式
- `normalizeAccelerator`: 标准化快捷键格式，处理不同表示方式

### 平台特定处理

- 检测当前操作系统平台(macOS, Windows, Linux)
- 根据平台调整修饰键映射(Command/Control, Option/Alt)
- 处理平台特定的快捷键约定和差异

### 辅助功能

- 快捷键的解析和组合
- 修饰键的识别与标准化
- 特殊键名称的映射和处理
- 验证快捷键格式的有效性

## 与其他模块的关系

- 被`ShortcutManager`用于处理注册全局快捷键前的格式转换
- 被`useHotkeys`钩子用于处理组件级快捷键
- 可以被任何需要处理键盘快捷键的模块引用
- 依赖`utils/platform.ts`获取平台信息

## 使用场景

- 在主进程中注册格式化的全局快捷键
- 在UI中显示用户友好的快捷键表示
- 在用户偏好设置中处理快捷键输入和存储
- 跨平台应用中确保快捷键一致性

## 技术考量

- **纯函数设计:** 所有函数都是纯函数，没有副作用，易于测试
- **可复用性:** 同时适用于主进程和渲染进程
- **跨平台兼容:** 处理不同操作系统平台上的快捷键差异
- **错误处理:** 包含验证逻辑，防止无效的快捷键格式

## 开发者注释

- 所有快捷键格式处理应使用这些工具函数，避免重复逻辑
- 添加新的快捷键格式或特殊键处理时，应在此模块中实现
- 考虑平台差异，尤其是macOS与Windows/Linux之间的修饰键差异
- 确保在更新快捷键处理逻辑时同步更新所有相关函数 