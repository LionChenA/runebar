# useHotkeys - 快捷键React钩子

## 组件概述

**文件路径:** `src/hooks/useHotkeys.ts`  
**角色:** React钩子 - 快捷键管理  
**层级:** 应用层

`useHotkeys.ts`提供了一组React钩子，用于在React组件中管理和响应键盘快捷键，包括局部快捷键和全局快捷键。它提供了一种声明式的方式来定义和处理键盘事件，同时处理了许多常见的边缘情况和浏览器兼容性问题。

## 核心功能

- `useHotkeys`: 在React组件中注册局部键盘快捷键
- `useGlobalShortcut`: 监听主进程发送的全局快捷键事件
- `useKeyboardMonitor`: 提供调试工具监控键盘活动

## 实现细节

### useHotkeys

- 支持多种快捷键格式和自定义选项
- 处理平台特定的修饰键差异
- 防止表单元素中的意外触发
- 避免与系统保留的快捷键冲突
- 自动处理事件防抖和清理

### useGlobalShortcut

- 连接到由`shortcut-context.ts`暴露的`electronShortcut.onShortcut` API
- 处理来自主进程的全局快捷键事件
- 提供自动清理机制，防止内存泄漏

### 辅助功能

- 平台检测用于跨平台兼容性
- 快捷键规范化和格式转换
- 键盘事件分析和处理
- 调试支持和事件监控

## 与其他模块的关系

- 使用`shortcut-context.ts`提供的类型和API与主进程通信
- 可与`hotkey_helpers.ts`中的辅助函数协同工作
- 为应用中的React组件提供快捷键功能

## 使用场景

- 组件级别的快捷键，如表单提交、模态框关闭
- 全局应用快捷键，如切换主题、显示/隐藏窗口
- 调试和测试键盘快捷键
- 实现应用特定的键盘导航

## 技术考量

- **性能优化:** 使用React refs和防抖技术避免不必要的重新渲染
- **跨平台兼容:** 处理不同操作系统平台上的键盘差异
- **可访问性:** 确保键盘导航和操作的可用性
- **开发体验:** 提供调试工具和详细的日志记录选项

## 开发者注释

- 使用声明式API定义快捷键，易于理解和维护
- 通过依赖数组和选项控制钩子的行为
- 调试模式可用于诊断和测试快捷键问题
- 可以配置为忽略或覆盖系统保留的快捷键 